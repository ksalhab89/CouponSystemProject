# Application
spring.application.name=coupon-system
server.port=8080

# DataSource Configuration (HikariCP)
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/couponsystem}
spring.datasource.username=${DB_USER:projectUser}
spring.datasource.password=${DB_PASSWORD:SecureDbPass2024!@#$}
spring.datasource.driver-class-name=org.postgresql.Driver

# HikariCP Connection Pool Settings
spring.datasource.hikari.maximum-pool-size=50
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.pool-name=CouponSystemHikariCP

# JWT Configuration
jwt.secret=${JWT_SECRET:your-256-bit-secret-change-this-in-production-must-be-at-least-32-chars-for-HS256}
jwt.expiration.access=3600000
jwt.expiration.refresh=86400000

# Admin Credentials (ADMIN_PASSWORD must be a bcrypt hash in .env)
admin.email=${ADMIN_EMAIL:admin@admin.com}
admin.password=${ADMIN_PASSWORD}

# Account Lockout Configuration
account.lockout.max-attempts=${LOCKOUT_MAX_ATTEMPTS:5}
account.lockout.duration-minutes=${LOCKOUT_DURATION_MINUTES:30}
account.lockout.admin-enabled=${LOCKOUT_ADMIN_ENABLED:false}

# Logging (Production: Set security to WARN, com.jhf.coupon to INFO)
logging.level.root=INFO
logging.level.com.jhf.coupon=INFO
logging.level.org.springframework.security=WARN
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Actuator (Metrics & Health Endpoints)
# Security: Only expose health publicly, prometheus on separate port (9090)
management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=when-authorized
management.endpoint.health.roles=ADMIN
management.metrics.export.prometheus.enabled=true

# Prometheus metrics on separate port (internal monitoring only)
management.server.port=9090
management.endpoints.web.base-path=/metrics

# Swagger/OpenAPI Configuration
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha

# CORS Configuration (externalized for environment-specific settings)
cors.allowed-origins=http://localhost:3000,http://localhost:4200
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=Authorization,Content-Type,Accept
cors.exposed-headers=Authorization
cors.allow-credentials=true
cors.max-age=3600

# Rate Limiting Configuration (Bucket4j token bucket algorithm)
# Prevents brute force attacks and API abuse
rate-limit.enabled=${RATE_LIMIT_ENABLED:true}
rate-limit.auth-requests-per-minute=${RATE_LIMIT_AUTH_RPM:5}
rate-limit.general-requests-per-minute=${RATE_LIMIT_GENERAL_RPM:100}
